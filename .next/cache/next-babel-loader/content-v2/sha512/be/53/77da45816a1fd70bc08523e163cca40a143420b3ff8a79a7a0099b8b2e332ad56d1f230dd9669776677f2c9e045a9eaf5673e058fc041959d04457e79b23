{"ast":null,"code":"import _toConsumableArray from \"/mnt/a19a7a81-2191-4824-bf23-fd9050b0961e/WebstormProjects/pokelist/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/mnt/a19a7a81-2191-4824-bf23-fd9050b0961e/WebstormProjects/pokelist/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/mnt/a19a7a81-2191-4824-bf23-fd9050b0961e/WebstormProjects/pokelist/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  background-color: \", \";\\n  color: white;\\n  margin-top: 8px;\\n  padding: 8px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 8px 4px;\\n  padding: 16px;\\n  border: 1px solid \", \";\\n  .wrapper {\\n    display: flex;\\n    flex-direction: column;\\n    text-align: center;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState } from \"react\";\nimport PokemonContainer from \"../../containers/PokemonContainer/PokemonContainer\";\nimport styled from \"@emotion/styled\";\nimport { useRouter } from \"next/router\";\nimport \"react-responsive-modal/styles.css\";\nimport { Modal } from \"react-responsive-modal\";\nimport useLocalStorage from \"../../utils/useLocalStorage\";\nimport { toast } from \"react-toastify\";\nimport Button from \"../../components/Button/Button\";\nimport { BACKGROUND, BOX } from \"components/colors\";\nvar Box = styled.div(_templateObject(), BOX.COLOR.border);\nvar ModalStyleSuccess = {\n  modal: {\n    background: BACKGROUND.COLOR.success\n  }\n};\nvar ModalStyleDanger = {\n  modal: {\n    background: BACKGROUND.COLOR.danger\n  }\n};\nvar AlertMessage = styled.p(_templateObject2(), BACKGROUND.COLOR.danger);\n\nvar Detail = function Detail() {\n  var _pokemonDetail$sprite, _pokemonDetail$sprite2;\n\n  var router = useRouter();\n\n  var _useLocalStorage = useLocalStorage(\"ownedPokemon\", \"\"),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      ownedPokemon = _useLocalStorage2[0],\n      setOwnedPokemon = _useLocalStorage2[1];\n\n  var _useState = useState(\"\"),\n      pokemonName = _useState[0],\n      setPokemonName = _useState[1];\n\n  var _useState2 = useState(false),\n      openSuccessModal = _useState2[0],\n      setOpenSuccessModal = _useState2[1];\n\n  var _useState3 = useState(false),\n      openFailModal = _useState3[0],\n      setOpenFailModal = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      alertMessage = _useState4[0],\n      setAlertMessage = _useState4[1];\n\n  var pokemonContainer = PokemonContainer.useContainer();\n  var fetchPokemonDetail = pokemonContainer.fetchPokemonDetail,\n      pokemonDetail = pokemonContainer.pokemonDetail,\n      fetchingPokemonDetail = pokemonContainer.fetchingPokemonDetail;\n  useEffect(function () {\n    fetchPokemonDetail(String(router.query.pokemonName));\n  }, []);\n\n  var handleCatchButtonClick = function handleCatchButtonClick() {\n    /**\n     *\n     * @param probabilityChance {number}, it is a number between 0 - 10 with 10 as 100%\n     */\n    var probability = function () {\n      var probabilityChance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.5;\n      return !!probabilityChance && Math.random() <= probabilityChance;\n    }();\n\n    if (probability) {\n      setOpenSuccessModal(true);\n    } else {\n      setOpenFailModal(true);\n    }\n  };\n\n  var renderModal = function renderModal() {\n    var savePokemon = function savePokemon() {\n      var isNickNameExist = function isNickNameExist() {\n        return ownedPokemon.some(function (item) {\n          return item.nickName === pokemonName;\n        });\n      };\n\n      if (ownedPokemon.length > 0 && isNickNameExist()) {\n        setAlertMessage(\"Duh lupa ya? kan yang namanya itu udah ada, coba nickname lain gih\");\n        return;\n      }\n\n      var catchedPokemon = {\n        name: pokemonDetail.name,\n        nickName: pokemonName,\n        image: pokemonDetail.sprites.front_default\n      };\n      setOwnedPokemon(function (prevState) {\n        if (prevState) {\n          return [].concat(_toConsumableArray(prevState), [catchedPokemon]);\n        }\n\n        return [catchedPokemon];\n      });\n      toast.success(\"Wah berhasil berhasil, cek profil anda gan!\", {\n        position: \"top-center\",\n        autoClose: 4000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n      setPokemonName(\"\");\n      setOpenSuccessModal(false);\n    };\n\n    return __jsx(React.Fragment, null, __jsx(Modal, {\n      styles: ModalStyleSuccess,\n      open: openSuccessModal,\n      onClose: function onClose() {\n        setPokemonName(\"\");\n        setOpenSuccessModal(false);\n      }\n    }, __jsx(\"h2\", null, \"Demi Apa??\"), __jsx(\"h3\", null, \"Kamu Berhasil Menangkapnya\"), __jsx(\"h4\", null, \"Beri pokemon mu nama tuan, biar semakin wantap wantap\"), __jsx(\"div\", null, __jsx(\"input\", {\n      type: \"text\",\n      value: pokemonName,\n      placeholder: \"Nama Pokemon mu tuan\",\n      onChange: function onChange(event) {\n        setAlertMessage(\"\");\n        setPokemonName(event.target.value);\n      }\n    }), __jsx(\"button\", {\n      onClick: savePokemon\n    }, \"Simpan\")), alertMessage && __jsx(AlertMessage, null, alertMessage)), __jsx(Modal, {\n      styles: ModalStyleDanger,\n      open: openFailModal,\n      onClose: function onClose() {\n        return setOpenFailModal(false);\n      }\n    }, __jsx(\"h2\", null, \"Gagal\"), __jsx(\"h3\", null, \"Sayang sekali coba lagi sampai sayang,\"), __jsx(\"h3\", null, \"Eh sampai dapat maksudnya\")));\n  };\n\n  return __jsx(Box, null, renderModal(), !fetchingPokemonDetail && pokemonDetail && __jsx(\"div\", {\n    className: \"wrapper\"\n  }, __jsx(\"div\", null, __jsx(\"img\", {\n    src: pokemonDetail === null || pokemonDetail === void 0 ? void 0 : (_pokemonDetail$sprite = pokemonDetail.sprites) === null || _pokemonDetail$sprite === void 0 ? void 0 : _pokemonDetail$sprite.front_default,\n    alt: pokemonDetail === null || pokemonDetail === void 0 ? void 0 : (_pokemonDetail$sprite2 = pokemonDetail.sprites) === null || _pokemonDetail$sprite2 === void 0 ? void 0 : _pokemonDetail$sprite2.front_default,\n    height: 96,\n    width: 96\n  })), __jsx(\"div\", null, __jsx(\"div\", null, __jsx(\"h2\", null, \"Name\"), __jsx(\"p\", null, pokemonDetail.name)), __jsx(\"div\", null, __jsx(Button, {\n    onClick: handleCatchButtonClick\n  }, \"Catch\")), __jsx(\"div\", null, __jsx(\"h2\", null, \"Types\"), pokemonDetail.types.map(function (type) {\n    return __jsx(\"p\", null, type.type.name);\n  })), __jsx(\"div\", null, __jsx(\"h2\", null, \"Moves\"), pokemonDetail.moves.map(function (move) {\n    return __jsx(\"p\", null, move.move.name);\n  }))), __jsx(\"div\", null)), fetchingPokemonDetail && \"Loading . . .\");\n};\n\nexport default Detail;","map":null,"metadata":{},"sourceType":"module"}